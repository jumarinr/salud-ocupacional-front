(function(a){function e(e){for(var r,s,n=e[0],c=e[1],l=e[2],u=0,m=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(a[r]=c[r]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var a,e=0;e<i.length;e++){for(var t=i[e],r=!0,n=1;n<t.length;n++){var c=t[n];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),a=s(s.s=t[0]))}return a}var r={},o={app:0},i=[];function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=a,s.c=r,s.d=function(a,e,t){s.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},s.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,e){if(1&e&&(a=s(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var r in a)s.d(t,r,function(e){return a[e]}.bind(null,r));return t},s.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return s.d(e,"a",e),e},s.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;i.push([0,"chunk-vendors"]),t()})({0:function(a,e,t){a.exports=t("56d7")},"56d7":function(a,e,t){"use strict";t.r(e);t("cadf"),t("551c"),t("f751"),t("097d");var r=t("2b0e"),o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],s=t("2877"),n={},c=Object(s["a"])(n,o,i,!1,null,null,null),l=c.exports,d=(t("6762"),t("2fdb"),t("8c4f")),u=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"justify-content-center align-items-center"},[r("div",{staticClass:"d-flex flex-column align-items-center px-5 py-4 rounded bg-white bg-light"},[r("b-media",[r("img",{attrs:{src:t("cf05"),alt:"Logo de la empresa",width:"140px"}})]),r("h4",{staticClass:"px-sm-5 text-center text-sm-left"},[a._v("Inicio de sesión")]),r("div",{staticClass:"py-2 px-0 px-sm-5 my-2"},[r("b-form",{staticClass:"d-flex flex-column align-items-center my-3",on:{submit:function(e){return e.preventDefault(),a.login(e)}}},[r("b-form-group",[r("input",{directives:[{name:"model",rawName:"v-model",value:a.correo,expression:"correo"}],staticClass:"form-control",attrs:{type:"email",id:"correo",placeholder:"Ingresar email",required:""},domProps:{value:a.correo},on:{input:function(e){e.target.composing||(a.correo=e.target.value)}}})]),r("b-form-group",[r("input",{directives:[{name:"model",rawName:"v-model",value:a.contrasena,expression:"contrasena"}],staticClass:"form-control",attrs:{type:"password",id:"contrasena",placeholder:"Ingresar contraseña",required:""},domProps:{value:a.contrasena},on:{input:function(e){e.target.composing||(a.contrasena=e.target.value)}}})]),!0===a.error?r("div",[r("div",{staticClass:"alert alert-danger"},[a._v("Usuario y/o contraseña no encontrado")])]):a._e(),r("b-button",{staticClass:"btn btn-primary",attrs:{type:"submit",variant:"primary"}},[a._v("Iniciar sesión")])],1)],1)],1)])},m=[],p=t("bc3a"),f=t.n(p),b={name:"Login",data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",correo:"",contrasena:"",error:{}}},methods:{login:function(){var a=this;f()({method:"POST",url:this.baseUrl+"/login",data:{correo:this.correo,contrasena:this.contrasena},withCredentials:!0}).then((function(e){e.data.error?a.error=e.data.error:(localStorage.setItem("usertoken",JSON.stringify(e.data)),localStorage.setItem("authenticated",!0),localStorage.setItem("areaTrabajo",JSON.parse(e.headers.session).areaTrabajo),localStorage.setItem("id",JSON.parse(e.headers.session).id),a.error=e.data.error,a.correo="",a.contrasena="",a.$router.push("home"))})).catch((function(a){console.log(a)}))}}},v=b,h=Object(s["a"])(v,u,m,!1,null,null,null),g=h.exports,j=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",[r("Header"),r("div",{staticClass:"align-self-center d-flex align-items-center flex-column"},[r("div",{staticClass:"d-flex align-items-center justify-content-center rounded-circle bg-white shadow",attrs:{id:"logo"}},[r("b-media",[r("img",{attrs:{src:t("cf05"),alt:"Logo de la empresa",width:"140px"}})])],1),r("h5",{staticClass:"mt-2 text-white"},[a._v(a._s(a.usuario.nombres)+" "+a._s(a.usuario.apellidos))]),r("h6",{staticClass:"d-inline text-white"},[a._v("Rol: "+a._s(a.usuario.areaTrabajo))])]),r("Footer")],1)},_=[],C=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("header",[r("b-navbar",{staticClass:"fixed-top bg-white",attrs:{toggleable:"lg"}},[r("b-navbar-brand",{attrs:{to:"/home"}},[r("img",{attrs:{src:t("cf05"),height:"30",alt:"Logo"}}),a._v("\n      Salud ocupacional\n    ")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto",attrs:{pills:""}},[r("b-nav-item",{attrs:{to:"/miPerfil",exact:"","exact-active-class":"active"}},[r("i",{staticClass:"fas fa-user"}),a._v("\n          Mi Perfil\n        ")]),"Direccion"==a.areaTrabajo()||"Empleado salud"==a.areaTrabajo()?r("b-nav-item",{attrs:{to:"/trabajadores",exact:"","exact-active-class":"active"}},[r("i",{staticClass:"fas fa-users"}),a._v("\n          Trabajadores\n        ")]):a._e(),"Direccion"==a.areaTrabajo()?r("b-nav-item",{attrs:{to:"/vacunas",exact:"","exact-active-class":"active"}},[r("i",{staticClass:"fas fa-medkit"}),a._v("\n          Vacunas\n        ")]):a._e(),"Direccion"==a.areaTrabajo()||"Empleado salud"==a.areaTrabajo()?r("b-nav-item",{attrs:{to:"/vacunas/aplicar",exact:"","exact-active-class":"active"}},[r("i",{staticClass:"fas fa-syringe"}),a._v("\n          Aplicar Vacunas\n        ")]):a._e(),r("b-nav-item",{attrs:{exact:"","exact-active-class":"active"},on:{click:a.logout}},[r("i",{staticClass:"fas fa-sign-out-alt"}),a._v("\n          Cerrar sesión\n        ")])],1)],1)],1)],1)},x=[],y={name:"Header",data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com"}},methods:{logout:function(){var a=this;f()({method:"DELETE",url:this.baseUrl+"/login",withCredentials:!0}).then((function(e){e.data.error||(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))},areaTrabajo:function(){return localStorage.getItem("areaTrabajo")}}},k=y,T=Object(s["a"])(k,C,x,!1,null,null,null),S=T.exports,w=function(){var a=this,e=a.$createElement;a._self._c;return a._m(0)},I=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("footer",{staticClass:"bg-white"},[t("div",{staticClass:"text-center py-2"},[a._v("\n    Requisistemas • Medellín - Colombia • (034) 4446958 • Support (+57) 3174959841\n  ")]),t("div",{staticClass:"text-center pb-2"},[a._v("\n    Privacy Policy | Terms of Use | ® 2019 Requisistemas\n  ")])])}],V={name:"Footer"},A=V,E=Object(s["a"])(A,w,I,!1,null,null,null),P=E.exports,D={name:"Home",components:{Header:S,Footer:P},data:function(){return{usuario:JSON.parse(localStorage.getItem("usertoken")).datos}}},$=D,U=(t("df2b"),Object(s["a"])($,j,_,!1,null,null,null)),F=U.exports,N=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"my-3 float-right",attrs:{to:"/",variant:"primary"}},[a._v("\n          Volver\n        ")]),t("h4",{staticClass:"my-3 float-left"},[a._v(a._s(this.trabajador.nombres)+" "+a._s(this.trabajador.apellidos))])],1),t("div",{staticClass:"w-100"},[t("b-table-simple",{staticClass:"rounded shadow",attrs:{stacked:""}},[t("b-tbody",[t("b-tr",{staticClass:"text-center"},[t("b-td",{attrs:{"stacked-heading":"Tipo de identificación:"}},[a._v(a._s(this.trabajador.tipoIdentificacion))]),t("b-td",{attrs:{"stacked-heading":"Identificación:"}},[a._v(a._s(this.trabajador.identificacion))]),t("b-td",{attrs:{"stacked-heading":"Correo:"}},[a._v(a._s(this.trabajador.correo))]),t("b-td",{attrs:{"stacked-heading":"Fecha de nacimiento:"}},[a._v(a._s(String(this.trabajador.fechaNacimiento).substring(0,10)))]),t("b-td",{attrs:{"stacked-heading":"Dirección:"}},[a._v(a._s(this.trabajador.direccion))]),t("b-td",{attrs:{"stacked-heading":"Teléfono:"}},[a._v(a._s(this.trabajador.telefono))]),t("b-td",{attrs:{"stacked-heading":"Celular:"}},[a._v(a._s(this.trabajador.celular))]),t("b-td",{attrs:{"stacked-heading":"Contacto de allegado:"}},[a._v(a._s(this.trabajador.contactoAllegado))]),t("b-td",{attrs:{"stacked-heading":"Nivel de riesgo laboral:"}},[a._v(a._s(this.trabajador.nivelRiesgoLaboral))]),t("b-td",{attrs:{"stacked-heading":"Área de trabajo:"}},[a._v(a._s(this.trabajador.areaTrabajo))])],1)],1)],1),t("h4",{staticClass:"p-2"},[a._v("Vacunas")]),t("div",{staticClass:"overflow-auto"},[t("b-table",{staticClass:"align-self-stretch shadow border text-center",attrs:{id:"my-table",items:a.vacunas,fields:a.camposVacunas,"per-page":a.perPage,"current-page":a.currentPage,small:""}}),t("b-pagination",{attrs:{"total-rows":a.rows,"per-page":a.perPage,"aria-controls":"my-table",align:"right"},model:{value:a.currentPage,callback:function(e){a.currentPage=e},expression:"currentPage"}})],1)],1)])]),t("Footer")],1)},O=[],R=(t("ac6a"),function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("main",{staticClass:"d-flex justify-content-center pt-5",attrs:{id:"containerPrincipal"}},[t("div",{staticClass:"row container bg-white px-2 py-4 my-4 rounded shadow"},[a._t("default")],2)])}),q=[],H={name:"Container"},M=H,B=Object(s["a"])(M,R,q,!1,null,null,null),L=B.exports,G={name:"MiPerfil",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",trabajador:JSON.parse(localStorage.getItem("usertoken")).datos,camposVacunas:[{key:"nombre",sortable:!0},{key:"cantidadAplicada",sortable:!1},{key:"proximaFechaDeAplicacion",sortable:!1}],vacunas:[],perPage:10,currentPage:1}},created:function(){this.obtenerVacunas()},methods:{obtenerVacunas:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/empleados/"+this.trabajador._id,withCredentials:!0}).then((function(e){a.trabajador=e.data.datos,null==a.trabajador.celular&&(a.trabajador.celular="N/A");var t=[];a.trabajador.detallesVacunacion.forEach((function(a){t.push({nombre:a.vacuna.nombre,cantidadAplicada:a.cantidadAplicada+" de "+a.vacuna.cantidadAplicar,proximaFechaDeAplicacion:a.cantidadAplicada==a.vacuna.cantidadAplicar?"✔":0,_rowVariant:0==a.cantidadAplicada?"danger":a.cantidadAplicada==a.vacuna.cantidadAplicar?"success":""})})),a.vacunas=t})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))}},computed:{rows:function(){return this.vacunas.length}}},z=G,J=Object(s["a"])(z,N,O,!1,null,null,null),Y=J.exports,Z=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"my-3 float-left",attrs:{to:"vacunas/registrar",variant:"primary"}},[a._v("\n          Registrar vacuna\n        ")]),t("div",{staticClass:"my-3 float-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.filtro,expression:"filtro"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar","aria-label":"Buscar"},domProps:{value:a.filtro},on:{input:function(e){e.target.composing||(a.filtro=e.target.value)}}})])],1),t("b-table",{staticClass:"align-self-stretch shadow border text-center",attrs:{items:a.vacunas,fields:a.camposVacunas,filter:a.filtro,filterIncludedFields:a.filterOn,"per-page":a.perPage,"current-page":a.currentPage,"sort-by":a.sortBy,"sort-icon-center":""},on:{"update:sortBy":function(e){a.sortBy=e},"update:sort-by":function(e){a.sortBy=e}},scopedSlots:a._u([{key:"cell(ver)",fn:function(e){return[t("span",{domProps:{innerHTML:a._s(e.value)}})]}},{key:"cell(editar)",fn:function(e){return[t("span",{domProps:{innerHTML:a._s(e.value)}})]}},{key:"cell(eliminar)",fn:function(e){return[t("button",{staticClass:"btn btn-danger",on:{click:function(t){return a.eliminarVacuna(e.value)}}},[t("i",{staticClass:"fas fa-trash-alt"})])]}}])}),t("div",[t("b-pagination",{staticClass:"mt-4",attrs:{"total-rows":a.rows,"per-page":a.perPage},scopedSlots:a._u([{key:"first-text",fn:function(){return[t("span",{staticClass:"text-success"},[a._v("Primero")])]},proxy:!0},{key:"prev-text",fn:function(){return[t("span",{staticClass:"text-danger"},[a._v("Atras")])]},proxy:!0},{key:"next-text",fn:function(){return[t("span",{staticClass:"text-warning"},[a._v("Siguiente")])]},proxy:!0},{key:"last-text",fn:function(){return[t("span",{staticClass:"text-info"},[a._v("Ultimo")])]},proxy:!0},{key:"ellipsis-text",fn:function(){return[t("b-spinner",{attrs:{small:"",type:"grow"}}),t("b-spinner",{attrs:{small:"",type:"grow"}}),t("b-spinner",{attrs:{small:"",type:"grow"}})]},proxy:!0},{key:"page",fn:function(e){var r=e.page,o=e.active;return[t(o?"b":"i",[a._v(a._s(r))])]}}]),model:{value:a.currentPage,callback:function(e){a.currentPage=e},expression:"currentPage"}})],1)],1)]),t("Footer")],1)},K=[],Q=(t("456d"),{name:"Vacunas",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",filtro:"",camposVacunas:[{key:"nombre",sortable:!0},{key:"ver",sortable:!1},{key:"editar",sortable:!1},{key:"eliminar",sortable:!1}],vacunas:[],filterOn:["nombre"],rows:1,perPage:20,currentPage:1,sortBy:"nombre"}},created:function(){this.obtenerVacunas()},methods:{obtenerVacunas:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/vacunas",withCredentials:!0}).then((function(e){a.vacunas=e.data.datos,a.rows=Object.keys(a.vacunas).length;for(var t=0;t<a.rows;t++){var r=a.vacunas[t]._id;a.vacunas[t]["ver"]='<a href="vacunas/ver/'+r+'" class="btn btn-info"> <i class="fas fa-user"></i></a>',a.vacunas[t]["editar"]='<a  href="vacunas/editar/'+r+'" class="btn btn-success"><i class="fas fa-user-edit"></i></a>',a.vacunas[t]["eliminar"]=r}console.log(a.vacunas)})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))},eliminarVacuna:function(a){var e=this;this.$bvModal.msgBoxConfirm("Deseas eliminar esta vacuna?",{size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Elíminar!",cancelTitle:"Cancelar!",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(t){t?f()({method:"DELETE",url:e.baseUrl+"/vacunas/"+a,withCredentials:!0}).then((function(t){e.vacunas=e.vacunas.filter((function(e){return e._id!=a}))})).catch((function(a){405==a.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),e.$router.push("/"))})):console.log("Cancelado")})).catch((function(a){}))}}}),W=Q,X=Object(s["a"])(W,Z,K,!1,null,null,null),aa=X.exports,ea=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"my-3 float-right",attrs:{to:"/vacunas",variant:"primary"}},[a._v("Volver")]),t("h4",{staticClass:"my-3 float-left"},[a._v(a._s(this.vacuna.nombre))])],1),t("div",{staticClass:"w-100"},[t("b-table-simple",{staticClass:"rounded shadow",attrs:{stacked:""}},[t("b-tbody",[t("b-tr",{staticClass:"text-center"},[t("b-td",{attrs:{"stacked-heading":"Cantidad de veces a aplicar:"}},[a._v(a._s(this.vacuna.cantidadAplicar))]),t("b-td",{attrs:{"stacked-heading":"Periodicidad:"}},[a._v(a._s(this.vacuna.periodicidad))]),t("b-td",{attrs:{"stacked-heading":"Entidad que presta el servicio:"}},[a._v(a._s(this.vacuna.prestadorServicio))]),t("b-td",{staticClass:"p-3",attrs:{"stacked-heading":"Descripción:"}},[a._v(a._s(this.vacuna.descripcion))])],1)],1)],1)],1)])]),t("Footer")],1)},ta=[],ra={name:"VerVacuna",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",idVacuna:this.$route.params.idVacuna,vacuna:{}}},created:function(){this.obtenerDatosVacuna()},methods:{obtenerDatosVacuna:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/vacunas/"+this.idVacuna,withCredentials:!0}).then((function(e){a.vacuna=e.data.datos})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))}}},oa=ra,ia=Object(s["a"])(oa,ea,ta,!1,null,null,null),sa=ia.exports,na=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"col d-flex flex-column justify-content-between py-2 px-1 px-sm-5 m-09"},[t("div",{staticClass:"my-2"},[t("h4",{staticClass:"float-left"},[a._v(a._s(a.modoEdicion?"Edición":"Registro")+" de vacuna")]),t("b-button",{staticClass:"float-right",attrs:{to:"/vacunas",variant:"primary"}},[a._v("Volver")])],1),t("div",{staticClass:"flex-grow-1 my-2"},[t("b-form",{on:{submit:function(e){return e.preventDefault(),a.funcionModo(e)}}},[t("b-form-group",[t("b-form-input",{attrs:{type:"text",id:"nombre-vacuna",placeholder:"Nombre",required:""},model:{value:a.nombre,callback:function(e){a.nombre=e},expression:"nombre"}})],1),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-11"},[t("b-form-input",{attrs:{type:"number",min:"1",id:"cantidad-aplicacion",placeholder:"Cantidad de veces a aplicar",required:""},model:{value:a.cantidadAplicar,callback:function(e){a.cantidadAplicar=e},expression:"cantidadAplicar"}})],1),t("label",{staticClass:"col-sm-1 col-form-label"},[a._v("Veces")])]),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-11"},[t("b-form-input",{attrs:{type:"number",min:"0",id:"periodicidad",placeholder:"Periodicidad"},model:{value:a.periodicidad,callback:function(e){a.periodicidad=e},expression:"periodicidad"}})],1),t("label",{staticClass:"col-sm-1 col-form-label"},[a._v("Días")])]),t("b-form-group",[t("b-form-input",{attrs:{type:"text",id:"entidad-prestadora",placeholder:"Entidad que brinda el servicio"},model:{value:a.prestadorServicio,callback:function(e){a.prestadorServicio=e},expression:"prestadorServicio"}})],1),t("b-form-group",[t("b-form-textarea",{attrs:{id:"descripcion",placeholder:"Descripción",rows:"3"},model:{value:a.descripcion,callback:function(e){a.descripcion=e},expression:"descripcion"}})],1),!1===a.error.error?t("div",[t("div",{staticClass:"alert alert-success"},[a._v(a._s(a.error.mensaje))])]):!0===a.error.error?t("div",[t("div",{staticClass:"alert alert-danger"},[a._v(a._s(a.error.mensaje))])]):a._e(),t("b-button",{staticClass:"float-right",attrs:{type:"submit",variant:"primary"}},[a._v(a._s(a.modoEdicion?"Editar":"Registrar"))])],1)],1)])]),t("Footer")],1)},ca=[],la={name:"RegistrarVacuna",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",modoEdicion:!!this.$route.params.idVacuna,nombre:"",descripcion:"",periodicidad:"",cantidadAplicar:"",prestadorServicio:"",error:{}}},methods:{registrarVacuna:function(){var a=this;f()({method:"POST",url:this.baseUrl+"/vacunas",data:{nombre:this.nombre,descripcion:this.descripcion,periodicidad:this.periodicidad,cantidadAplicar:this.cantidadAplicar,prestadorServicio:this.prestadorServicio},withCredentials:!0}).then((function(e){a.error=e.data})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))})),this.nombre="",this.descripcion="",this.periodicidad="",this.cantidadAplicar="",this.prestadorServicio=""},editarVacuna:function(){var a=this;f()({method:"PUT",url:this.baseUrl+"/vacunas/"+this.$route.params.idVacuna,withCredentials:!0,data:{nombre:this.nombre,descripcion:this.descripcion,periodicidad:this.periodicidad,cantidadAplicar:this.cantidadAplicar,prestadorServicio:this.prestadorServicio}}).then((function(e){a.error=e.data})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))},funcionModo:function(){return this.modoEdicion?this.editarVacuna():this.registrarVacuna()}},created:function(){var a=this;this.modoEdicion&&f()({method:"GET",url:this.baseUrl+"/vacunas/"+this.$route.params.idVacuna,withCredentials:!0}).then((function(e){a.nombre=e.data.datos.nombre,a.descripcion=e.data.datos.descripcion,a.periodicidad=e.data.datos.periodicidad,a.cantidadAplicar=e.data.datos.cantidadAplicar,a.prestadorServicio=e.data.datos.prestadorServicio})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))}},da=la,ua=Object(s["a"])(da,na,ca,!1,null,null,null),ma=ua.exports,pa=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"my-3 align-self-end"},[t("div",{staticClass:"d-inline-block"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.filtroTrabajador,expression:"filtroTrabajador"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar Trabajador","aria-label":"Buscar Trabajador"},domProps:{value:a.filtroTrabajador},on:{input:function(e){e.target.composing||(a.filtroTrabajador=e.target.value)}}})]),t("div",{staticClass:"d-inline-block"},[t("button",{staticClass:"btn btn-outline-primary mx-2",on:{click:function(e){return a.filtrarTrabajadores("AL DIA")}}},[t("i",{staticClass:"fas fa-user-check mr-2"}),t("span",[a._v("Al Día")])]),t("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return a.filtrarTrabajadores("ATRASADOS")}}},[t("i",{staticClass:"fas fa-user-alt-slash mr-2"}),t("span",[a._v("Atrasados")])])])]),t("b-table",{staticClass:"align-self-stretch shadow border text-center",attrs:{items:a.trabajadores,fields:a.campostrabajadores,filter:a.filtroTrabajador,filterIncludedFields:a.filterOn,"per-page":a.perPage,"current-page":a.currentPage,"sort-by":a.sortBy,"sort-icon-center":""},on:{"update:sortBy":function(e){a.sortBy=e},"update:sort-by":function(e){a.sortBy=e}},scopedSlots:a._u([{key:"cell(vacunas)",fn:function(e){return[t("span",{domProps:{innerHTML:a._s(e.value)}})]}}])}),t("div",[t("b-pagination",{staticClass:"mt-4",attrs:{"total-rows":a.rows,"per-page":a.perPage},scopedSlots:a._u([{key:"first-text",fn:function(){return[t("span",{staticClass:"text-success"},[a._v("Primero")])]},proxy:!0},{key:"prev-text",fn:function(){return[t("span",{staticClass:"text-danger"},[a._v("Atras")])]},proxy:!0},{key:"next-text",fn:function(){return[t("span",{staticClass:"text-warning"},[a._v("Siguiente")])]},proxy:!0},{key:"last-text",fn:function(){return[t("span",{staticClass:"text-info"},[a._v("Ultimo")])]},proxy:!0},{key:"ellipsis-text",fn:function(){return[t("b-spinner",{attrs:{small:"",type:"grow"}}),t("b-spinner",{attrs:{small:"",type:"grow"}}),t("b-spinner",{attrs:{small:"",type:"grow"}})]},proxy:!0},{key:"page",fn:function(e){var r=e.page,o=e.active;return[t(o?"b":"i",[a._v(a._s(r))])]}}]),model:{value:a.currentPage,callback:function(e){a.currentPage=e},expression:"currentPage"}})],1)],1)]),t("Footer")],1)},fa=[],ba={name:"AplicarVacunas",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",filtroTrabajador:"",campostrabajadores:[{key:"nombres",sortable:!0},{key:"identificacion",sortable:!0},{key:"vacunas",sortable:!1}],trabajadores:[],filterOn:["nombres","identificacion","estadoGeneral"],rows:1,perPage:50,currentPage:1,sortBy:"nombres"}},created:function(){this.obtenertrabajadores(),this.filtarCompletos()},methods:{obtenertrabajadores:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/empleados",withCredentials:!0}).then((function(e){a.trabajadores=e.data.datos,a.trabajadores=a.trabajadores.filter((function(a){return a._id!=localStorage.getItem("id")&&"Direccion"!=a.areaTrabajo&&"Empleado salud"==a.areaTrabajo&&"Direccion"==localStorage.getItem("areaTrabajo")||"Empleado normal"==a.areaTrabajo})),a.rows=Object.keys(a.trabajadores).length;for(var t=new Date,r=0;r<a.rows;r++){var o=a.trabajadores[r]._id;a.trabajadores[r]["vacunas"]='<a href="aplicar/'+o+'" class="btn btn-info"> <i class="fas fa-eye"></i></a>';var i=0,s=0;if(a.trabajadores[r].detallesVacunacion.length>0){for(var n=0;n<a.trabajadores[r].detallesVacunacion.length;n++)if(a.trabajadores[r].detallesVacunacion[n].aplicaciones.length>0)if(a.trabajadores[r].detallesVacunacion[n].aplicaciones.length==a.trabajadores[r].detallesVacunacion[n].vacuna.cantidadAplicar)a.trabajadores[r].detallesVacunacion[n]["estado"]="Vacuna completa",s++;else{var c=new Date(Date.parse(a.trabajadores[r].detallesVacunacion[n].aplicaciones[a.trabajadores[r].detallesVacunacion[n].aplicaciones.length-1]));Math.floor((t.getTime()-c.getTime())/864e5)>a.trabajadores[r].detallesVacunacion[n].vacuna.periodicidad?(a.trabajadores[r].detallesVacunacion[n]["estado"]="Atrasado",i++):a.trabajadores[r].detallesVacunacion[n]["estado"]="Al dia"}s==a.trabajadores[r].detallesVacunacion.length&&(a.trabajadores[r]["estadoGeneral"]="completoTodo")}a.trabajadores[r]["estadoGeneral"]=i>0?"atrasado":"al dia"}})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))},filtrarTrabajadores:function(a){"AL DIA"==a?this.filtroTrabajador="al dia":"ATRASADOS"==a&&(this.filtroTrabajador="atrasado")},filtarCompletos:function(){this.trabajadores=this.trabajadores.filter((function(a){return"completoTodo"!==a.estadoGeneral}))}}},va=ba,ha=Object(s["a"])(va,pa,fa,!1,null,null,null),ga=ha.exports,ja=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"my-3 float-right",attrs:{to:"/vacunas/aplicar",variant:"primary"}},[a._v("Volver")]),t("h5",{},[a._v(a._s(this.trabajador.nombres)+" "+a._s(this.trabajador.apellidos))]),t("h5",{},[a._v("Identificacion: "+a._s(this.trabajador.identificacion))])],1),t("div",{staticClass:"w-100"},[t("h5",[a._v("Aplicación de vacunas")]),t("div",{staticClass:"overflow-auto"},[t("b-table",{staticClass:"align-self-stretch shadow border text-center",attrs:{id:"my-table",items:a.vacunas,fields:a.camposVacunas,"per-page":a.perPage,"current-page":a.currentPage,small:""},scopedSlots:a._u([{key:"cell(aplicar)",fn:function(e){return[t("button",{staticClass:"btn btn-success",on:{click:function(t){a.setFechaUltimaAplicacion(""),a.$bvModal.show(e.item.id+"aplicar")}}},[t("i",{staticClass:"fas fa-syringe"})]),t("b-modal",{attrs:{id:e.item.id+"aplicar","hide-footer":""},scopedSlots:a._u([{key:"modal-title",fn:function(){return[a._v("Ingresar fecha de la última aplicación:")]},proxy:!0}],null,!0)},[t("div",{staticClass:"d-block text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.fechaUltimaAplicacion,expression:"fechaUltimaAplicacion"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:a.fechaUltimaAplicacion},on:{input:function(e){e.target.composing||(a.fechaUltimaAplicacion=e.target.value)}}})]),t("b-button",{staticClass:"mt-3 btn-success",attrs:{block:""},on:{click:[function(t){return a.aplicarVacuna(e)},function(t){return a.$bvModal.hide(e.item.id+"aplicar")}]}},[a._v("Guardar")])],1)]}},{key:"cell(editar)",fn:function(e){return[t("button",{staticClass:"btn btn-info",attrs:{disabled:0==e.item.aplicacionesHechas},on:{click:function(t){a.setFechaUltimaAplicacion(e.item.fechaUltimaAplicacion),a.$bvModal.show(e.item.id+"editar")}}},[t("i",{staticClass:"fas fa-edit"})]),t("b-modal",{attrs:{id:e.item.id+"editar","hide-footer":""},scopedSlots:a._u([{key:"modal-title",fn:function(){return[a._v("Editar fecha de la última aplicación:")]},proxy:!0}],null,!0)},[t("div",{staticClass:"d-block text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.fechaUltimaAplicacion,expression:"fechaUltimaAplicacion"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:a.fechaUltimaAplicacion},on:{input:function(e){e.target.composing||(a.fechaUltimaAplicacion=e.target.value)}}})]),t("b-button",{staticClass:"mt-3 btn-info",attrs:{block:""},on:{click:[function(t){return a.editarVacuna(e)},function(t){return a.$bvModal.hide(e.item.id+"editar")}]}},[a._v("Editar")])],1)]}},{key:"cell(eliminar)",fn:function(e){return[t("button",{staticClass:"btn btn-danger",attrs:{disabled:0==e.item.aplicacionesHechas},on:{click:function(t){return a.eliminarVacuna(e)}}},[t("i",{staticClass:"fas fa-trash-alt"})])]}}])}),t("b-pagination",{attrs:{"total-rows":a.rows,"per-page":a.perPage,"aria-controls":"my-table",align:"right"},model:{value:a.currentPage,callback:function(e){a.currentPage=e},expression:"currentPage"}})],1)])])]),t("Footer")],1)},_a=[],Ca=(t("28a5"),{name:"AplicarVacunasTrabajador",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",idTrabajador:this.$route.params.idTrabajador,trabajador:{},fechaUltimaAplicacion:"",camposVacunas:[{key:"nombre",sortable:!0},{key:"cantidadAplicada",sortable:!1},{key:"proximaFechaDeAplicacion",sortable:!1},{key:"aplicar",sortable:!1},{key:"editar",sortable:!1},{key:"eliminar",sortable:!1}],vacunas:[],perPage:10,currentPage:1}},computed:{rows:function(){return this.vacunas.length}},created:function(){this.obtenerDatosEmpleado()},methods:{obtenerDatosEmpleado:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/empleados/"+this.idTrabajador,withCredentials:!0}).then((function(e){a.trabajador=e.data.datos,null==a.trabajador.celular&&(a.trabajador.celular="N/A");var t=[];a.trabajador.detallesVacunacion.forEach((function(a){var e="--";if(a.aplicaciones.length>0){var r=String(a.aplicaciones[a.aplicaciones.length-1]).split("T")[0].split("-");e=new Date,e.setFullYear(r[0]),e.setMonth(r[1]-1),e.setDate(parseInt(r[2])+parseInt(a.vacuna.periodicidad)),e=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}t.push({id:a.vacuna._id,nombre:a.vacuna.nombre,cantidadAplicada:a.aplicaciones.length+" de "+a.vacuna.cantidadAplicar,proximaFechaDeAplicacion:e,fechaUltimaAplicacion:String(a.aplicaciones[a.aplicaciones.length-1]).split("T")[0],aplicacionesHechas:a.aplicaciones.length})})),a.vacunas=t})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))},aplicarVacuna:function(a){var e=this;f()({method:"POST",url:this.baseUrl+"/empleados/"+this.idTrabajador+"/vacunas/"+a.item.id,withCredentials:!0,data:{fechaAplicacion:this.fechaUltimaAplicacion}}).then((function(a){e.$bvModal.msgBoxOk(a.data.mensaje,{buttonSize:"sm",okVariant:0==a.data.error?"success":"danger"}).then((function(t){0==a.data.error&&e.$router.go()}))})).catch((function(a){405==a.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),e.$router.push("/"))}))},editarVacuna:function(a){var e=this;f()({method:"PUT",url:this.baseUrl+"/empleados/"+this.idTrabajador+"/vacunas/"+a.item.id,withCredentials:!0,data:{fechaAplicacion:this.fechaUltimaAplicacion}}).then((function(a){e.$bvModal.msgBoxOk(a.data.mensaje,{buttonSize:"sm",okVariant:0==a.data.error?"success":"danger"}).then((function(t){0==a.data.error&&e.$router.go()}))})).catch((function(a){405==a.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),e.$router.push("/"))}))},eliminarVacuna:function(a){var e=this;this.$bvModal.msgBoxConfirm("¿Desea eliminar la última fecha de aplicación?",{size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Eliminar",cancelTitle:"Cancelar",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(t){t&&f()({method:"DELETE",url:e.baseUrl+"/empleados/"+e.idTrabajador+"/vacunas/"+a.item.id,withCredentials:!0}).then((function(a){e.$bvModal.msgBoxOk(a.data.mensaje,{buttonSize:"sm",okVariant:0==a.data.error?"success":"danger"}).then((function(t){0==a.data.error&&e.$router.go()}))})).catch((function(a){405==a.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),e.$router.push("/"))}))})).catch((function(a){}))},setFechaUltimaAplicacion:function(a){this.fechaUltimaAplicacion=a}}}),xa=Ca,ya=Object(s["a"])(xa,ja,_a,!1,null,null,null),ka=ya.exports,Ta=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"my-3 float-left",attrs:{to:"trabajadores/registrar",variant:"primary"}},[a._v("Registrar trabajador")]),t("div",{staticClass:"my-3 float-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.filtro,expression:"filtro"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar","aria-label":"Buscar"},domProps:{value:a.filtro},on:{input:function(e){e.target.composing||(a.filtro=e.target.value)}}})])],1),t("b-table",{staticClass:"align-self-stretch shadow border text-center",attrs:{items:a.empleados,fields:a.camposEmpleados,filter:a.filtro,filterIncludedFields:a.filterOn,"per-page":a.perPage,"current-page":a.currentPage,"sort-by":a.sortBy,"sort-icon-center":""},on:{"update:sortBy":function(e){a.sortBy=e},"update:sort-by":function(e){a.sortBy=e}},scopedSlots:a._u([{key:"cell(ver)",fn:function(e){return[t("span",{domProps:{innerHTML:a._s(e.value)}})]}},{key:"cell(editar)",fn:function(e){return[t("span",{domProps:{innerHTML:a._s(e.value)}})]}},{key:"cell(eliminar)",fn:function(e){return[t("button",{staticClass:"btn btn-danger",on:{click:function(t){return a.eliminarEmpleado(e.value)}}},[t("i",{staticClass:"fas fa-trash-alt"})])]}}])}),t("div",[t("b-pagination",{staticClass:"mt-4",attrs:{"total-rows":a.rows,"per-page":a.perPage},scopedSlots:a._u([{key:"first-text",fn:function(){return[t("span",{staticClass:"text-success"},[a._v("Primero")])]},proxy:!0},{key:"prev-text",fn:function(){return[t("span",{staticClass:"text-danger"},[a._v("Atras")])]},proxy:!0},{key:"next-text",fn:function(){return[t("span",{staticClass:"text-warning"},[a._v("Siguiente")])]},proxy:!0},{key:"last-text",fn:function(){return[t("span",{staticClass:"text-info"},[a._v("Ultimo")])]},proxy:!0},{key:"ellipsis-text",fn:function(){return[t("b-spinner",{attrs:{small:"",type:"grow"}}),t("b-spinner",{attrs:{small:"",type:"grow"}}),t("b-spinner",{attrs:{small:"",type:"grow"}})]},proxy:!0},{key:"page",fn:function(e){var r=e.page,o=e.active;return[t(o?"b":"i",[a._v(a._s(r))])]}}]),model:{value:a.currentPage,callback:function(e){a.currentPage=e},expression:"currentPage"}})],1)],1)]),t("Footer")],1)},Sa=[],wa={name:"Trabajadores",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",filtro:"",camposEmpleados:[{key:"nombres",sortable:!0},{key:"identificacion",sortable:!1},{key:"ver",sortable:!1},{key:"editar",sortable:!1},{key:"eliminar",sortable:!1}],empleados:[],filterOn:["nombres","identificacion"],rows:1,perPage:50,currentPage:1,sortBy:"nombres"}},created:function(){this.obtenerEmpleados()},methods:{obtenerEmpleados:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/empleados",withCredentials:!0}).then((function(e){a.empleados=e.data.datos,a.empleados=a.empleados.filter((function(a){return a._id!=localStorage.getItem("id")&&"Direccion"!=a.areaTrabajo&&"Empleado salud"==a.areaTrabajo&&"Direccion"==localStorage.getItem("areaTrabajo")||"Empleado normal"==a.areaTrabajo||"Direccion"==localStorage.getItem("areaTrabajo")})),a.rows=Object.keys(a.empleados).length;for(var t=0;t<a.rows;t++){var r=a.empleados[t]._id;a.empleados[t]["ver"]='<a href="trabajadores/ver/'+r+'" class="btn btn-info"> <i class="fas fa-user"></i></a>',a.empleados[t]["editar"]='<a  href="trabajadores/editar/'+r+'" class="btn btn-success"><i class="fas fa-user-edit"></i></a>',a.empleados[t]["eliminar"]=r}})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))},eliminarEmpleado:function(a){var e=this;this.$bvModal.msgBoxConfirm("Deseas eliminar este trabajador?",{size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Elíminar!",cancelTitle:"Cancelar!",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(t){t?f()({method:"DELETE",url:e.baseUrl+"/empleados/"+a,withCredentials:!0}).then((function(t){e.empleados=e.empleados.filter((function(e){return e._id!=a}))})).catch((function(a){405==a.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),e.$router.push("/"))})):console.log("Cancelado")})).catch((function(a){}))}}},Ia=wa,Va=Object(s["a"])(Ia,Ta,Sa,!1,null,null,null),Aa=Va.exports,Ea=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"w-100 d-flex flex-column align-items-center p-3"},[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"my-3 float-right",attrs:{to:"/trabajadores",variant:"primary"}},[a._v("\n          Volver\n        ")]),t("h4",{staticClass:"my-3 float-left"},[a._v(a._s(this.trabajador.nombres)+" "+a._s(this.trabajador.apellidos))])],1),t("div",{staticClass:"w-100"},[t("b-table-simple",{staticClass:"rounded shadow",attrs:{stacked:""}},[t("b-tbody",[t("b-tr",{staticClass:"text-center"},[t("b-td",{attrs:{"stacked-heading":"Tipo de identificación:"}},[a._v(a._s(this.trabajador.tipoIdentificacion))]),t("b-td",{attrs:{"stacked-heading":"Identificación:"}},[a._v(a._s(this.trabajador.identificacion))]),t("b-td",{attrs:{"stacked-heading":"Correo:"}},[a._v(a._s(this.trabajador.correo))]),t("b-td",{attrs:{"stacked-heading":"Fecha de nacimiento:"}},[a._v(a._s(String(this.trabajador.fechaNacimiento).substring(0,10)))]),t("b-td",{attrs:{"stacked-heading":"Dirección:"}},[a._v(a._s(this.trabajador.direccion))]),t("b-td",{attrs:{"stacked-heading":"Teléfono:"}},[a._v(a._s(this.trabajador.telefono))]),t("b-td",{attrs:{"stacked-heading":"Celular:"}},[a._v(a._s(this.trabajador.celular))]),t("b-td",{attrs:{"stacked-heading":"Contacto de allegado:"}},[a._v(a._s(this.trabajador.contactoAllegado))]),t("b-td",{attrs:{"stacked-heading":"Nivel de riesgo laboral:"}},[a._v(a._s(this.trabajador.nivelRiesgoLaboral))]),t("b-td",{attrs:{"stacked-heading":"Área de trabajo:"}},[a._v(a._s(this.trabajador.areaTrabajo))])],1)],1)],1),t("h4",{staticClass:"p-2"},[a._v("Vacunas")]),t("div",{staticClass:"overflow-auto"},[t("b-table",{staticClass:"align-self-stretch shadow border text-center",attrs:{id:"my-table",items:a.vacunas,fields:a.camposVacunas,"per-page":a.perPage,"current-page":a.currentPage,small:""}}),t("b-pagination",{attrs:{"total-rows":a.rows,"per-page":a.perPage,"aria-controls":"my-table",align:"right"},model:{value:a.currentPage,callback:function(e){a.currentPage=e},expression:"currentPage"}})],1)],1)])]),t("Footer")],1)},Pa=[],Da={name:"VerTrabajador",components:{Header:S,Container:L,Footer:P},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",idTrabajador:this.$route.params.idTrabajador,trabajador:{},camposVacunas:[{key:"nombre",sortable:!0},{key:"cantidadAplicada",sortable:!1},{key:"proximaFechaDeAplicacion",sortable:!1}],vacunas:[],perPage:10,currentPage:1}},computed:{rows:function(){return this.vacunas.length}},created:function(){this.obtenerDatosEmpleado()},methods:{obtenerDatosEmpleado:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/empleados/"+this.idTrabajador,withCredentials:!0}).then((function(e){a.trabajador=e.data.datos,null==a.trabajador.celular&&(a.trabajador.celular="N/A");var t=[];a.trabajador.detallesVacunacion.forEach((function(a){var e="--";if(a.aplicaciones.length>0){var r=String(a.aplicaciones[a.aplicaciones.length-1]).split("T")[0].split("-");e=new Date,e.setFullYear(r[0]),e.setMonth(r[1]-1),e.setDate(parseInt(r[2])+parseInt(a.vacuna.periodicidad)),e=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}t.push({nombre:a.vacuna.nombre,cantidadAplicada:a.aplicaciones.length+" de "+a.vacuna.cantidadAplicar,proximaFechaDeAplicacion:e})})),a.vacunas=t})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))}}},$a=Da,Ua=Object(s["a"])($a,Ea,Pa,!1,null,null,null),Fa=Ua.exports,Na=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("Header"),t("Container",[t("div",{staticClass:"col px-1 px-sm-5"},[t("b-form",{attrs:{id:"form-paso1"},on:{submit:function(e){return e.preventDefault(),a.camposVacios(e)}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!a.ocultar,expression:"!ocultar"}],attrs:{id:"#vista1"}},[t("Stepper",{attrs:{paso:"1"}}),null!==a.error?t("div",{class:[!0===a.error?"alert-danger":"alert-success","alert"]},[a._v(a._s(a.mensajeTransaccion))]):a._e(),t("h4",{staticClass:"px-sm-5 text-center text-sm-left"},[a._v(a._s(a.modoEdicion?"Edición":"Registro")+" de trabajador")]),t("div",{staticClass:"py-2 px-0 px-sm-5 my-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"tipoDocumento"}},[a._v("Tipo de identificación")]),t("b-form-select",{attrs:{options:a.opcionesTipoDoc,required:""},model:{value:a.tipoDocumento,callback:function(e){a.tipoDocumento=e},expression:"tipoDocumento"}})],1),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"documento"}},[a._v("Identificación")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.documento,expression:"documento"}],staticClass:"form-control",attrs:{type:"text",id:"documento",placeholder:"Identificación",required:""},domProps:{value:a.documento},on:{input:function(e){e.target.composing||(a.documento=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"correo"}},[a._v("Correo")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.correo,expression:"correo"}],staticClass:"form-control",attrs:{type:"email",id:"correo",placeholder:"Correo",required:""},domProps:{value:a.correo},on:{input:function(e){e.target.composing||(a.correo=e.target.value)}}})]),t("label",{attrs:{for:"nombres"}},[a._v("Nombres")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.nombres,expression:"nombres"}],staticClass:"form-control",attrs:{type:"text",pattern:"[A-Za-z_á_é_í_ó_ú_ñ_Á_É_Í_Ó_Ú_ ]{3,}",id:"nombres",placeholder:"Nombres",required:""},domProps:{value:a.nombres},on:{input:function(e){e.target.composing||(a.nombres=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"apellidos"}},[a._v("Apellidos")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.apellidos,expression:"apellidos"}],staticClass:"form-control",attrs:{type:"text",pattern:"[A-Za-z_á_é_í_ó_ú_ñ_Á_É_Í_Ó_Ú_ ]{3,}",id:"apellidos",placeholder:"Apellidos",required:""},domProps:{value:a.apellidos},on:{input:function(e){e.target.composing||(a.apellidos=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"nacimiento"}},[a._v("Fecha de nacimiento")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.fechaNacimiento,expression:"fechaNacimiento"}],staticClass:"form-control",attrs:{type:"date",id:"nacimiento",min:"1939-01-01",max:"2000-12-29",required:""},domProps:{value:a.fechaNacimiento},on:{input:function(e){e.target.composing||(a.fechaNacimiento=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"direccion"}},[a._v("Dirección")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.direccion,expression:"direccion"}],staticClass:"form-control",attrs:{type:"text",id:"direccion",placeholder:"Dirección",required:""},domProps:{value:a.direccion},on:{input:function(e){e.target.composing||(a.direccion=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"telefono"}},[a._v("Teléfono")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.telefono,expression:"telefono"}],staticClass:"form-control",attrs:{type:"text",id:"telefono",placeholder:"Teléfono",required:""},domProps:{value:a.telefono},on:{input:function(e){e.target.composing||(a.telefono=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"celular"}},[a._v("Celular")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.celular,expression:"celular"}],staticClass:"form-control",attrs:{type:"text",id:"celular",placeholder:"Celular"},domProps:{value:a.celular},on:{input:function(e){e.target.composing||(a.celular=e.target.value)}}})]),t("div",{staticClass:"form-group text-left"},[t("label",{attrs:{for:"telefonoFamiliar"}},[a._v("Contacto de allegado")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.telefonoFamiliar,expression:"telefonoFamiliar"}],staticClass:"form-control",attrs:{type:"text",id:"telefonoFamiliar",placeholder:"Contacto de allegado",required:""},domProps:{value:a.telefonoFamiliar},on:{input:function(e){e.target.composing||(a.telefonoFamiliar=e.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"nivelRiesgo"}},[a._v("Nivel de riesgo laboral")]),t("b-form-select",{attrs:{options:a.opcionesRiesgo,required:""},model:{value:a.nivelRiesgo,callback:function(e){a.nivelRiesgo=e},expression:"nivelRiesgo"}})],1),t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.tipoTrabajador,expression:"tipoTrabajador"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"tipoTrabajador",id:"tipoTrabajador"},domProps:{checked:Array.isArray(a.tipoTrabajador)?a._i(a.tipoTrabajador,"tipoTrabajador")>-1:a.tipoTrabajador},on:{change:function(e){var t=a.tipoTrabajador,r=e.target,o=!!r.checked;if(Array.isArray(t)){var i="tipoTrabajador",s=a._i(t,i);r.checked?s<0&&(a.tipoTrabajador=t.concat([i])):s>-1&&(a.tipoTrabajador=t.slice(0,s).concat(t.slice(s+1)))}else a.tipoTrabajador=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"tipoTrabajador"}},[a._v("¿El trabajador se desempeña en el área de salud y seguridad en el trabajo?")])]),a.mostrarCamposVacios?t("div",[t("div",{staticClass:"alert alert-danger"},[a._v("Campos vacios")])]):a._e()]),t("b-button",{staticClass:"float-right mr-sm-5",attrs:{type:"submit",variant:"primary"}},[a._v("Siguiente")])],1)]),t("b-form",{on:{submit:function(e){return e.preventDefault(),a.funcionModo(e)}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.ocultar,expression:"ocultar"}],attrs:{id:"#vista2"}},[t("Stepper",{attrs:{paso:"2"}}),t("h4",{staticClass:"px-sm-5 pb-2 text-center text-sm-left"},[a._v("Listado de vacunas")]),t("div",{staticClass:"flex-grow-1 overflow-auto py-2 px-0 px-sm-5 my-2"},[t("b-form-group",a._l(a.listaVacunas,(function(e){return t("b-form-checkbox-group",{key:e._id,attrs:{id:"checkbox-group-2",name:"seleccionarVacunas"},model:{value:a.detallesVacunacion,callback:function(e){a.detallesVacunacion=e},expression:"detallesVacunacion"}},[t("b-form-checkbox",{attrs:{value:e._id}},[a._v(a._s(e.nombre))])],1)})),1)],1)],1),t("b-button",{directives:[{name:"show",rawName:"v-show",value:a.ocultar,expression:"ocultar"}],staticClass:"float-left ml-sm-5",attrs:{variant:"primary"},on:{click:function(e){a.ocultar=!a.ocultar}}},[a._v("Atras")]),a.ocultar?t("b-button",{staticClass:"float-right mr-sm-5",attrs:{type:"submit",variant:"primary"}},[a._v(a._s(a.modoEdicion?"Editar":"Registrar"))]):a._e()],1)],1)]),t("Footer")],1)},Oa=[],Ra=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"d-flex justify-content-center align-items-center pb-3 stepper"},[t("span",{class:[1==a.paso?"border-primary text-primary":"","rounded-circle border stepper-item"]},[t("i",{staticClass:"fas fa-user-plus"})]),t("span",{},[a._v("-------------")]),t("span",{class:[2==a.paso?"border-primary text-primary":"","rounded-circle border stepper-item"]},[t("i",{staticClass:"fas fa-medkit"})])])},qa=[],Ha={name:"Stepper",props:["paso"]},Ma=Ha,Ba=(t("bebf"),Object(s["a"])(Ma,Ra,qa,!1,null,null,null)),La=Ba.exports,Ga={name:"RegistrarTrabajador",components:{Header:S,Container:L,Footer:P,Stepper:La},data:function(){return{baseUrl:"https://salud-ocupacional-back.herokuapp.com",modoEdicion:!!this.$route.params.idTrabajador,nombres:"",apellidos:"",direccion:"",correo:"",tipoDocumento:null,documento:"",telefono:"",celular:null,nivelRiesgo:null,fechaNacimiento:"",telefonoFamiliar:"",tipoTrabajador:"",detallesVacunacion:[],error:null,mensajeTransaccion:"",ocultar:!1,mostrarCamposVacios:!1,listaVacunas:[],opcionesRiesgo:[{value:null,text:"Seleccionar nivel de riesgo"},{value:"I",text:"I"},{value:"II",text:"II"},{value:"III",text:"III"},{value:"IV",text:"IV"},{value:"V",text:"V"}],opcionesTipoDoc:[{value:null,text:"Seleccionar tipo de documento"},{value:"cc",text:"Cédula de ciudadanía"},{value:"tp",text:"Pasaporte"}]}},methods:{registrarTrabajador:function(){var a=this;this.error=null,this.mensajeTransaccion="",f()({method:"POST",url:this.baseUrl+"/empleados",withCredentials:!0,data:{nombres:this.nombres,apellidos:this.apellidos,direccion:this.direccion,correo:this.correo,tipoDocumento:this.tipoDocumento,documento:this.documento,telefono:this.telefono,celular:this.celular,nivelRiesgo:this.nivelRiesgo,fechaNacimiento:this.fechaNacimiento,telefonoFamiliar:this.telefonoFamiliar,tipoTrabajador:this.tipoTrabajador,detallesVacunacion:this.detallesVacunacion}}).then((function(e){a.error=e.data.error,a.mensajeTransaccion=e.data.mensaje})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))})),this.nombres="",this.apellidos="",this.direccion="",this.correo="",this.tipoDocumento=null,this.documento="",this.telefono="",this.celular=null,this.nivelRiesgo=null,this.fechaNacimiento="",this.telefonoFamiliar="",this.tipoTrabajador="",this.detallesVacunacion=[],this.ocultar=!this.ocultar,this.mostrarCamposVacios=!1},camposVacios:function(){[this.nombres,this.apellidos,this.direccion,this.correo,this.tipoDocumento,this.documento,this.telefono,this.nivelRiesgo,this.fechaNacimiento,this.telefonoFamiliar].some((function(a){return""===a}))?this.mostrarCamposVacios=!0:this.ocultar=!this.ocultar},editarTrabajador:function(){var a=this;f()({method:"PUT",url:this.baseUrl+"/empleados/"+this.$route.params.idTrabajador,withCredentials:!0,data:{nombres:this.nombres,apellidos:this.apellidos,direccion:this.direccion,correo:this.correo,tipoDocumento:this.tipoDocumento,documento:this.documento,telefono:this.telefono,celular:this.celular,nivelRiesgo:this.nivelRiesgo,fechaNacimiento:this.fechaNacimiento,telefonoFamiliar:this.telefonoFamiliar,tipoTrabajador:this.tipoTrabajador,detallesVacunacion:this.detallesVacunacion}}).then((function(e){a.error=e.data.error,a.mensajeTransaccion=e.data.mensaje})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))})),this.nombres="",this.apellidos="",this.direccion="",this.correo="",this.tipoDocumento=null,this.documento="",this.telefono="",this.celular=null,this.nivelRiesgo=null,this.fechaNacimiento="",this.telefonoFamiliar="",this.tipoTrabajador="",this.detallesVacunacion=[],this.ocultar=!this.ocultar,this.mostrarCamposVacios=!1},funcionModo:function(){return this.modoEdicion?this.editarTrabajador():this.registrarTrabajador()}},created:function(){var a=this;f()({method:"GET",url:this.baseUrl+"/vacunas",withCredentials:!0}).then((function(e){a.listaVacunas=e.data.datos})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))})),this.modoEdicion&&f()({method:"GET",url:this.baseUrl+"/empleados/"+this.$route.params.idTrabajador,withCredentials:!0}).then((function(e){a.tipoDocumento=a.opcionesTipoDoc.filter((function(a){return a.value==e.data.datos.tipoIdentificacion}))[0].value,a.documento=e.data.datos.identificacion,a.correo=e.data.datos.correo,a.nombres=e.data.datos.nombres,a.apellidos=e.data.datos.apellidos,a.fechaNacimiento=String(e.data.datos.fechaNacimiento).substring(0,10),a.direccion=e.data.datos.direccion,a.telefono=e.data.datos.telefono,a.celular=e.data.datos.celular,a.telefonoFamiliar=e.data.datos.contactoAllegado,a.nivelRiesgo=a.opcionesRiesgo.filter((function(a){return a.value==e.data.datos.nivelRiesgoLaboral}))[0].value,a.tipoTrabajador="Empleado salud"==e.data.datos.areaTrabajo,a.detallesVacunacion=e.data.datos.detallesVacunacion.map((function(a){return a.vacuna._id}))})).catch((function(e){405==e.response.status&&(localStorage.removeItem("usertoken"),localStorage.removeItem("authenticated"),localStorage.removeItem("areaTrabajo"),localStorage.removeItem("id"),a.$router.push("/"))}))}},za=Ga,Ja=Object(s["a"])(za,Na,Oa,!1,null,null,null),Ya=Ja.exports;r["default"].use(d["a"]);var Za=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Login",component:g,beforeEnter:function(a,e,t){localStorage.getItem("authenticated")?t(F):t()},meta:{requiresAuth:!1,areasTrabajoRestringidas:[]}},{path:"/home",name:"Home",component:F,meta:{requiresAuth:!0,areasTrabajoRestringidas:[]}},{path:"/miPerfil",name:"MiPerfil",component:Y,meta:{requiresAuth:!0,areasTrabajoRestringidas:[]}},{path:"/trabajadores/registrar",name:"RegistrarTrabajador",component:Ya,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal"]}},{path:"/trabajadores/ver/:idTrabajador",name:"VerTrabajador",component:Fa,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal"]}},{path:"/trabajadores/editar/:idTrabajador",name:"EditarTrabajador",component:Ya,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal"]}},{path:"/trabajadores",name:"Trabajadores",component:Aa,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal"]}},{path:"/vacunas/registrar",name:"RegistrarVacuna",component:ma,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal","Empleado salud"]}},{path:"/vacunas/ver/:idVacuna",name:"VerVacuna",component:sa,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal","Empleado salud"]}},{path:"/vacunas/editar/:idVacuna",name:"EditarVacuna",component:ma,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal","Empleado salud"]}},{path:"/vacunas",name:"Vacunas",component:aa,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal","Empleado salud"]}},{path:"/vacunas/aplicar",name:"AplicarVacunas",component:ga,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal"]}},{path:"/vacunas/aplicar/:idTrabajador",name:"AplicarVacunasTrabajador",component:ka,meta:{requiresAuth:!0,areasTrabajoRestringidas:["Empleado normal"]}},{path:"*",beforeEnter:function(a,e,t){t(F)}}]});Za.beforeEach((function(a,e,t){a.matched.some((function(a){return a.meta.requiresAuth}))?localStorage.getItem("authenticated")?a.matched.some((function(a){return a.meta.areasTrabajoRestringidas.includes(localStorage.getItem("areaTrabajo"))}))?t(F):t():t(g):t()}));var Ka=Za,Qa=t("5f5b");t("d8bb");r["default"].use(Qa["a"]),r["default"].config.productionTip=!1,new r["default"]({router:Ka,render:function(a){return a(l)}}).$mount("#app")},bebf:function(a,e,t){"use strict";var r=t("f428"),o=t.n(r);o.a},cf05:function(a,e,t){a.exports=t.p+"img/logo.dbf5414c.png"},d8bb:function(a,e,t){},dc69:function(a,e,t){},df2b:function(a,e,t){"use strict";var r=t("dc69"),o=t.n(r);o.a},f428:function(a,e,t){}});
//# sourceMappingURL=app.a3d9386a.js.map